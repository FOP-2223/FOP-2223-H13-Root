name: Run Grader Tests

on:
  push:
    branches:
      - main
      - master
  pull_request:
  workflow_dispatch:

jobs:
    test:
        runs-on: ubuntu-latest
        timeout-minutes: 15
        steps:
            - uses: actions/checkout@v3
            - name: Set up JDK 17
              uses: actions/setup-java@v3
              with:
                  java-version: "17"
                  distribution: "temurin"
            - name: Validate Gradle wrapper
              uses: gradle/wrapper-validation-action@v1
            - name: Build with Gradle
              uses: gradle/gradle-build-action@v2
              env:
                _JAVA_OPTIONS: -Djava.awt.headless=true -Dtestfx.robot=glass -Dtestfx.headless=true -Dprism.order=sw -Dprism.lcdtext=false -Dprism.subpixeltext=false -Dglass.win.uiScale=100% -Dprism.text=t2k
              with:
                  arguments: graderPrivateRun
